<!-- WebSocket 消息拦截器设置面板 -->
<div class="ws-interceptor-settings">
    <div class="inline-drawer">
        <div class="inline-drawer-toggle inline-drawer-header">
            <b>WebSocket 消息拦截器</b>
            <div class="inline-drawer-icon fa-solid fa-circle-chevron-down down"></div>
        </div>
        <div class="inline-drawer-content">
            <!-- 启用/禁用开关 -->
            <div class="ws-interceptor_block flex-container">
                <input id="ws_interceptor_enabled" type="checkbox" />
                <label for="ws_interceptor_enabled">启用 WebSocket 拦截</label>
            </div>

            <!-- 服务器地址设置 -->
            <div class="ws-interceptor_block">
                <label for="ws_server_host">服务器地址:</label>
                <input
                    id="ws_server_host"
                    type="text"
                    class="text_pole"
                    placeholder="localhost"
                />
            </div>

            <!-- 端口设置 -->
            <div class="ws-interceptor_block">
                <label for="ws_server_port">端口:</label>
                <input
                    id="ws_server_port"
                    type="number"
                    class="text_pole"
                    min="1"
                    max="65535"
                    placeholder="8080"
                />
            </div>

            <!-- 超时设置 -->
            <div class="ws-interceptor_block">
                <label for="ws_timeout">连接超时时间 (秒):</label>
                <input
                    id="ws_timeout"
                    type="number"
                    class="text_pole"
                    min="1"
                    max="120"
                    value="30"
                />
            </div>

            <!-- 测试连接按钮 -->
            <div class="ws-interceptor_block flex-container">
                <input
                    id="ws_test_connection"
                    class="menu_button"
                    type="button"
                    value="测试连接"
                />
            </div>

            <!-- 说明信息 -->
            <div class="ws-interceptor_block ws-interceptor_info">
                <p><strong>使用说明:</strong></p>
                <ul>
                    <li>启用后，发送的消息会先通过 WebSocket 发送到服务端处理</li>
                    <li>服务端处理完成后返回的内容会替换原始消息发送给 AI</li>
                    <li>服务端应返回 JSON 格式: <code>{"content": "处理后的文本"}</code></li>
                    <li>或直接返回纯文本</li>
                </ul>
            </div>

            <hr class="sysHR" />
        </div>
    </div>
</div>
